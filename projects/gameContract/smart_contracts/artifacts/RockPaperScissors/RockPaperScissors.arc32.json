{
    "hints": {
        "createSession((uint64,uint64,uint64,uint64),pay)uint64": {
            "call_config": {
                "no_op": "CALL"
            },
            "structs": {
                "config": {
                    "name": "ObjectB555233E",
                    "elements": [
                        [
                            "startAt",
                            "uint64"
                        ],
                        [
                            "endCommitAt",
                            "uint64"
                        ],
                        [
                            "endRevealAt",
                            "uint64"
                        ],
                        [
                            "participation",
                            "uint64"
                        ]
                    ]
                }
            }
        },
        "joinSession(uint64,byte[],pay,pay)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "revealMove(uint64,uint64,byte[])void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getRequiredMBR(string)uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMSAwIDIgOCA0MjYwMAogICAgYnl0ZWNibG9jayAibmV3R2FtZSIgImpvaW4iICJwY2hvIiAic2Vzc2lvbklEQ291bnRlciIgImdzIiAic2JhbCIgInNwbCIgImdmbiIgMHgxNTFmN2M3NSAicGNvbSIKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBibnogbWFpbl9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjQzCiAgICAvLyBzZXNzaW9uSURDb3VudGVyID0gR2xvYmFsU3RhdGU8dWludDY0Pih7IGluaXRpYWxWYWx1ZTogMCB9KQogICAgYnl0ZWNfMyAvLyAic2Vzc2lvbklEQ291bnRlciIKICAgIGludGNfMSAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAoKbWFpbl9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxOAogICAgLy8gZXhwb3J0IGNsYXNzIFJvY2tQYXBlclNjaXNzb3JzIGV4dGVuZHMgR2FtZUNvbnRyYWN0IHsKICAgIHR4biBOdW1BcHBBcmdzCiAgICBieiBtYWluX19fYWxnb3RzX18uZGVmYXVsdENyZWF0ZUAxMwogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQKICAgIHB1c2hieXRlc3MgMHgyYzQ5YTVjZiAweGU2MjAxYjNlIDB4N2U2MDAyM2MgMHg5ZTRhM2FlNSAvLyBtZXRob2QgImNyZWF0ZVNlc3Npb24oKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkscGF5KXVpbnQ2NCIsIG1ldGhvZCAiam9pblNlc3Npb24odWludDY0LGJ5dGVbXSxwYXkscGF5KXZvaWQiLCBtZXRob2QgInJldmVhbE1vdmUodWludDY0LHVpbnQ2NCxieXRlW10pdm9pZCIsIG1ldGhvZCAiZ2V0UmVxdWlyZWRNQlIoc3RyaW5nKXVpbnQ2NCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIGNyZWF0ZVNlc3Npb24gam9pblNlc3Npb24gcmV2ZWFsTW92ZSBnZXRSZXF1aXJlZE1CUgogICAgZXJyCgptYWluX19fYWxnb3RzX18uZGVmYXVsdENyZWF0ZUAxMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE4CiAgICAvLyBleHBvcnQgY2xhc3MgUm9ja1BhcGVyU2Npc3NvcnMgZXh0ZW5kcyBHYW1lQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICEKICAgICYmCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIG11c3QgYmUgTm9PcCAmJiBjYW4gb25seSBjYWxsIHdoZW4gY3JlYXRpbmcKICAgIGludGNfMCAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuY3JlYXRlU2Vzc2lvbltyb3V0aW5nXSgpIC0+IHZvaWQ6CmNyZWF0ZVNlc3Npb246CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHVibGljIGNyZWF0ZVNlc3Npb24oY29uZmlnOiBHYW1lQ29uZmlnLCBtYnJQYXltZW50OiBndHhuLlBheW1lbnRUeG4pOiB1aW50NjQgewogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIE9iamVjdEI1NTUyMzNFCiAgICB0eG4gR3JvdXBJbmRleAogICAgaW50Y18wIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMCAvLyBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjQwCiAgICAvLyBjb25zdCB0b3RhbE1CUjogdWludDY0ID0gdGhpcy5nZXRSZXF1aXJlZE1CUignbmV3R2FtZScpCiAgICBieXRlY18wIC8vICJuZXdHYW1lIgogICAgY2FsbHN1YiBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjQyCiAgICAvLyBhc3NlcnQobWJyUGF5bWVudC5yZWNlaXZlciA9PT0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsICdNQlIgcGF5bWVudCBtdXN0IGJlIHNlbnQgdG8gY29udHJhY3QnKQogICAgZGlnIDEKICAgIGd0eG5zIFJlY2VpdmVyCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyBNQlIgcGF5bWVudCBtdXN0IGJlIHNlbnQgdG8gY29udHJhY3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjQzCiAgICAvLyBhc3NlcnQobWJyUGF5bWVudC5hbW91bnQgPT09IHRvdGFsTUJSLCAnUGF5bWVudCBtdXN0IGNvdmVyIGV4YWN0IE1CUiBmb3Igc2Vzc2lvbiBkYXRhJykKICAgIHN3YXAKICAgIGd0eG5zIEFtb3VudAogICAgPT0KICAgIGFzc2VydCAvLyBQYXltZW50IG11c3QgY292ZXIgZXhhY3QgTUJSIGZvciBzZXNzaW9uIGRhdGEKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjc2CiAgICAvLyBhc3NlcnQoY29uZmlnLnN0YXJ0QXQgPD0gY29uZmlnLmVuZENvbW1pdEF0LCAnSW52YWxpZCB0aW1lbGluZTogc3RhcnQgbXVzdCBiZSBiZWZvcmUgY29tbWl0IGVuZCcpCiAgICBkdXAKICAgIGludGNfMSAvLyAwCiAgICBleHRyYWN0X3VpbnQ2NAogICAgZGlnIDEKICAgIGludGNfMyAvLyA4CiAgICBleHRyYWN0X3VpbnQ2NAogICAgZHVwMgogICAgPD0KICAgIGFzc2VydCAvLyBJbnZhbGlkIHRpbWVsaW5lOiBzdGFydCBtdXN0IGJlIGJlZm9yZSBjb21taXQgZW5kCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo3NwogICAgLy8gYXNzZXJ0KGNvbmZpZy5lbmRDb21taXRBdCA8IGNvbmZpZy5lbmRSZXZlYWxBdCwgJ0ludmFsaWQgdGltZWxpbmU6IGNvbW1pdCBlbmQgbXVzdCBiZSBiZWZvcmUgcmV2ZWFsIGVuZCcpCiAgICBkaWcgMgogICAgcHVzaGludCAxNiAvLyAxNgogICAgZXh0cmFjdF91aW50NjQKICAgIDwKICAgIGFzc2VydCAvLyBJbnZhbGlkIHRpbWVsaW5lOiBjb21taXQgZW5kIG11c3QgYmUgYmVmb3JlIHJldmVhbCBlbmQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjc4CiAgICAvLyBhc3NlcnQoY29uZmlnLnN0YXJ0QXQgPj0gR2xvYmFsLnJvdW5kLCAnSW52YWxpZCBzdGFydCB0aW1lOiBjYW5ub3Qgc3RhcnQgaW4gdGhlIHBhc3QnKQogICAgZ2xvYmFsIFJvdW5kCiAgICA+PQogICAgYXNzZXJ0IC8vIEludmFsaWQgc3RhcnQgdGltZTogY2Fubm90IHN0YXJ0IGluIHRoZSBwYXN0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo4MAogICAgLy8gY29uc3Qgc2Vzc2lvbklEID0gdGhpcy5zZXNzaW9uSURDb3VudGVyLnZhbHVlCiAgICBpbnRjXzEgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6NDMKICAgIC8vIHNlc3Npb25JRENvdW50ZXIgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KHsgaW5pdGlhbFZhbHVlOiAwIH0pCiAgICBieXRlY18zIC8vICJzZXNzaW9uSURDb3VudGVyIgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6ODAKICAgIC8vIGNvbnN0IHNlc3Npb25JRCA9IHRoaXMuc2Vzc2lvbklEQ291bnRlci52YWx1ZQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjgyCiAgICAvLyB0aGlzLmdhbWVTZXNzaW9ucyhzZXNzaW9uSUQpLnZhbHVlID0gY2xvbmUoY29uZmlnKQogICAgZHVwCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo2MgogICAgLy8gZ2FtZVNlc3Npb25zID0gQm94TWFwPHVpbnQ2NCwgR2FtZUNvbmZpZz4oeyBrZXlQcmVmaXg6ICdncycgfSkKICAgIGJ5dGVjIDQgLy8gImdzIgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6ODIKICAgIC8vIHRoaXMuZ2FtZVNlc3Npb25zKHNlc3Npb25JRCkudmFsdWUgPSBjbG9uZShjb25maWcpCiAgICB1bmNvdmVyIDMKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjY3CiAgICAvLyBzZXNzaW9uQmFsYW5jZXMgPSBCb3hNYXA8dWludDY0LCB1aW50NjQ+KHsga2V5UHJlZml4OiAnc2JhbCcgfSkKICAgIGJ5dGVjIDUgLy8gInNiYWwiCiAgICBkaWcgMQogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo4MwogICAgLy8gdGhpcy5zZXNzaW9uQmFsYW5jZXMoc2Vzc2lvbklEKS52YWx1ZSA9IDAKICAgIGludGNfMSAvLyAwCiAgICBpdG9iCiAgICBzd2FwCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6ODQKICAgIC8vIHRoaXMuc2Vzc2lvbklEQ291bnRlci52YWx1ZSA9IHNlc3Npb25JRCArIDEKICAgIHVuY292ZXIgMgogICAgaW50Y18wIC8vIDEKICAgICsKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjQzCiAgICAvLyBzZXNzaW9uSURDb3VudGVyID0gR2xvYmFsU3RhdGU8dWludDY0Pih7IGluaXRpYWxWYWx1ZTogMCB9KQogICAgYnl0ZWNfMyAvLyAic2Vzc2lvbklEQ291bnRlciIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjg0CiAgICAvLyB0aGlzLnNlc3Npb25JRENvdW50ZXIudmFsdWUgPSBzZXNzaW9uSUQgKyAxCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MjMKICAgIC8vIHNlc3Npb25QbGF5ZXJzID0gQm94TWFwPHVpbnQ2NCwgU2Vzc2lvblBsYXllcnM+KHsga2V5UHJlZml4OiAnc3BsJyB9KQogICAgYnl0ZWMgNiAvLyAic3BsIgogICAgZGlnIDIKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NTAtNTMKICAgIC8vIHRoaXMuc2Vzc2lvblBsYXllcnMoc2Vzc2lvbklEKS52YWx1ZSA9IHsKICAgIC8vICAgcDE6IG5ldyBBZGRyZXNzKHplcm9BZGRyZXNzKSwKICAgIC8vICAgcDI6IG5ldyBBZGRyZXNzKHplcm9BZGRyZXNzKSwKICAgIC8vIH0KICAgIHB1c2hieXRlcyBiYXNlMzIoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQSkKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjMwCiAgICAvLyBnYW1lRmluaXNoZWQgPSBCb3hNYXA8dWludDY0LCB1aW50NjQ+KHsga2V5UHJlZml4OiAnZ2ZuJyB9KQogICAgYnl0ZWMgNyAvLyAiZ2ZuIgogICAgZGlnIDIKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NTQKICAgIC8vIHRoaXMuZ2FtZUZpbmlzaGVkKHNlc3Npb25JRCkudmFsdWUgPSAwCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHVibGljIGNyZWF0ZVNlc3Npb24oY29uZmlnOiBHYW1lQ29uZmlnLCBtYnJQYXltZW50OiBndHhuLlBheW1lbnRUeG4pOiB1aW50NjQgewogICAgYnl0ZWMgOCAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18wIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjpSb2NrUGFwZXJTY2lzc29ycy5qb2luU2Vzc2lvbltyb3V0aW5nXSgpIC0+IHZvaWQ6CmpvaW5TZXNzaW9uOgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NjgKICAgIC8vIHB1YmxpYyBqb2luU2Vzc2lvbihzZXNzaW9uSUQ6IHVpbnQ2NCwgY29tbWl0OiBieXRlcywgcGF5bWVudDogZ3R4bi5QYXltZW50VHhuLCBtYnJQYXltZW50OiBndHhuLlBheW1lbnRUeG4pOiB2b2lkIHsKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzMgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgaW50Y18xIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMiAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIGV4dHJhY3QgMiAwCiAgICBzd2FwCiAgICB0eG4gR3JvdXBJbmRleAogICAgaW50Y18yIC8vIDIKICAgIC0KICAgIGR1cAogICAgY292ZXIgMgogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMCAvLyBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIHR4biBHcm91cEluZGV4CiAgICBpbnRjXzAgLy8gMQogICAgLQogICAgZHVwCiAgICBjb3ZlciAyCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18wIC8vIHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTkzCiAgICAvLyByZXR1cm4gdGhpcy5nYW1lU2Vzc2lvbnMoc2Vzc2lvbklEKS5leGlzdHMKICAgIGl0b2IKICAgIGR1cAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6NjIKICAgIC8vIGdhbWVTZXNzaW9ucyA9IEJveE1hcDx1aW50NjQsIEdhbWVDb25maWc+KHsga2V5UHJlZml4OiAnZ3MnIH0pCiAgICBieXRlYyA0IC8vICJncyIKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGR1cAogICAgY292ZXIgMgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTkzCiAgICAvLyByZXR1cm4gdGhpcy5nYW1lU2Vzc2lvbnMoc2Vzc2lvbklEKS5leGlzdHMKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NjkKICAgIC8vIGFzc2VydCh0aGlzLnNlc3Npb25FeGlzdHMoc2Vzc2lvbklEKSwgJ1Nlc3Npb24gZG9lcyBub3QgZXhpc3QnKQogICAgYXNzZXJ0IC8vIFNlc3Npb24gZG9lcyBub3QgZXhpc3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjIzCiAgICAvLyBzZXNzaW9uUGxheWVycyA9IEJveE1hcDx1aW50NjQsIFNlc3Npb25QbGF5ZXJzPih7IGtleVByZWZpeDogJ3NwbCcgfSkKICAgIGJ5dGVjIDYgLy8gInNwbCIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZHVwCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo3MQogICAgLy8gY29uc3QgcGxheWVycyA9IGNsb25lKHRoaXMuc2Vzc2lvblBsYXllcnMoc2Vzc2lvbklEKS52YWx1ZSkKICAgIGJveF9nZXQKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gQm94IG11c3QgaGF2ZSB2YWx1ZQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NzIKICAgIC8vIGNvbnN0IHNlbmRlckFkZHJlc3MgPSBuZXcgQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjczCiAgICAvLyBjb25zdCB6ZXJvQWRkcmVzcyA9IG5ldyBBZGRyZXNzKEdsb2JhbC56ZXJvQWRkcmVzcykKICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgY292ZXIgMgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NzYKICAgIC8vIHBsYXllcnMucDEubmF0aXZlICE9PSBzZW5kZXJBZGRyZXNzLm5hdGl2ZSAmJiBwbGF5ZXJzLnAyLm5hdGl2ZSAhPT0gc2VuZGVyQWRkcmVzcy5uYXRpdmUsCiAgICBleHRyYWN0IDAgMzIKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICAhPQogICAgYnogam9pblNlc3Npb25fYm9vbF9mYWxzZUA0CiAgICBkaWcgMwogICAgZXh0cmFjdCAzMiAzMgogICAgZGlnIDMKICAgICE9CiAgICBieiBqb2luU2Vzc2lvbl9ib29sX2ZhbHNlQDQKICAgIGludGNfMCAvLyAxCgpqb2luU2Vzc2lvbl9ib29sX21lcmdlQDU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo3NS03OAogICAgLy8gYXNzZXJ0KAogICAgLy8gICBwbGF5ZXJzLnAxLm5hdGl2ZSAhPT0gc2VuZGVyQWRkcmVzcy5uYXRpdmUgJiYgcGxheWVycy5wMi5uYXRpdmUgIT09IHNlbmRlckFkZHJlc3MubmF0aXZlLAogICAgLy8gICAnUGxheWVyIGFscmVhZHkgam9pbmVkIHRoaXMgc2Vzc2lvbicsCiAgICAvLyApCiAgICBhc3NlcnQgLy8gUGxheWVyIGFscmVhZHkgam9pbmVkIHRoaXMgc2Vzc2lvbgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IHJlcXVpcmVkTUJSOiB1aW50NjQgPSB0aGlzLmdldFJlcXVpcmVkTUJSKCdqb2luJykKICAgIGJ5dGVjXzEgLy8gImpvaW4iCiAgICBjYWxsc3ViIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjpSb2NrUGFwZXJTY2lzc29ycy5nZXRSZXF1aXJlZE1CUgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChtYnJQYXltZW50LnJlY2VpdmVyID09PSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywgJ01CUiBwYXltZW50IHJlY2VpdmVyIG11c3QgYmUgY29udHJhY3QnKQogICAgZGlnIDgKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIE1CUiBwYXltZW50IHJlY2VpdmVyIG11c3QgYmUgY29udHJhY3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjgzCiAgICAvLyBhc3NlcnQobWJyUGF5bWVudC5hbW91bnQgPT09IHJlcXVpcmVkTUJSLCAnSW5zdWZmaWNpZW50IE1CUiBwYXltZW50IGZvciBwbGF5ZXIgc3RvcmFnZScpCiAgICBndHhucyBBbW91bnQKICAgID09CiAgICBhc3NlcnQgLy8gSW5zdWZmaWNpZW50IE1CUiBwYXltZW50IGZvciBwbGF5ZXIgc3RvcmFnZQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6ODYKICAgIC8vIGlmIChwbGF5ZXJzLnAxLm5hdGl2ZSA9PT0gemVyb0FkZHJlc3MubmF0aXZlKSB7CiAgICBkdXAKICAgIGRpZyAyCiAgICA9PQogICAgYnogam9pblNlc3Npb25fZWxzZV9ib2R5QDcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjg3CiAgICAvLyBwbGF5ZXJzLnAxID0gc2VuZGVyQWRkcmVzcwogICAgZGlnIDMKICAgIGRpZyAzCiAgICByZXBsYWNlMiAwCiAgICBidXJ5IDQKCmpvaW5TZXNzaW9uX2FmdGVyX2lmX2Vsc2VAMTE6CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo5NwogICAgLy8gYXNzZXJ0KHRoaXMuZ2FtZVNlc3Npb25zKHNlc3Npb25JRCkuZXhpc3RzLCAnU2Vzc2lvbiBkb2VzIG5vdCBleGlzdCcpCiAgICBkaWcgNQogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBTZXNzaW9uIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo5OQogICAgLy8gY29uc3QgY29uZmlnID0gY2xvbmUodGhpcy5nYW1lU2Vzc2lvbnMoc2Vzc2lvbklEKS52YWx1ZSkKICAgIGJveF9nZXQKICAgIHBvcAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTAwCiAgICAvLyBjb25zdCBjdXJyZW50QmxvY2sgPSBHbG9iYWwucm91bmQKICAgIGdsb2JhbCBSb3VuZAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTAyCiAgICAvLyBhc3NlcnQoY3VycmVudEJsb2NrID49IGNvbmZpZy5zdGFydEF0LCAnR2FtZSBzZXNzaW9uIGhhcyBub3Qgc3RhcnRlZCB5ZXQnKQogICAgZGlnIDEKICAgIGludGNfMSAvLyAwCiAgICBleHRyYWN0X3VpbnQ2NAogICAgZGlnIDEKICAgIDw9CiAgICBhc3NlcnQgLy8gR2FtZSBzZXNzaW9uIGhhcyBub3Qgc3RhcnRlZCB5ZXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjEwMwogICAgLy8gYXNzZXJ0KGN1cnJlbnRCbG9jayA8PSBjb25maWcuZW5kQ29tbWl0QXQsICdDb21taXQgcGhhc2UgaGFzIGVuZGVkJykKICAgIGRpZyAxCiAgICBpbnRjXzMgLy8gOAogICAgZXh0cmFjdF91aW50NjQKICAgIDw9CiAgICBhc3NlcnQgLy8gQ29tbWl0IHBoYXNlIGhhcyBlbmRlZAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTA1CiAgICAvLyBhc3NlcnQocGF5bWVudC5yZWNlaXZlciA9PT0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsICdGZWUgcmVjZWl2ZXIgbXVzdCBiZSB0aGUgY29udHJhY3QnKQogICAgZGlnIDkKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIEZlZSByZWNlaXZlciBtdXN0IGJlIHRoZSBjb250cmFjdAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTA2CiAgICAvLyBhc3NlcnQocGF5bWVudC5hbW91bnQgPT09IGNvbmZpZy5wYXJ0aWNpcGF0aW9uLCAnSW5jb3JyZWN0IHBhcnRpY2lwYXRpb24gZmVlIGFtb3VudCcpCiAgICBndHhucyBBbW91bnQKICAgIHN3YXAKICAgIHB1c2hpbnQgMjQgLy8gMjQKICAgIGV4dHJhY3RfdWludDY0CiAgICBkaWcgMQogICAgPT0KICAgIGFzc2VydCAvLyBJbmNvcnJlY3QgcGFydGljaXBhdGlvbiBmZWUgYW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMDgKICAgIC8vIGNvbnN0IHBsYXllckFkZHIgPSBuZXcgQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MjAxCiAgICAvLyByZXR1cm4gc2hhMjU2KGl0b2Ioc2Vzc2lvbklEKS5jb25jYXQocGxheWVyLmJ5dGVzKSkKICAgIGRpZyA4CiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjUwCiAgICAvLyBwbGF5ZXJDb21taXQgPSBCb3hNYXA8Ynl0ZXMsIGJ5dGVzPih7IGtleVByZWZpeDogJ3Bjb20nIH0pCiAgICBieXRlYyA5IC8vICJwY29tIgogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMTEKICAgIC8vIGFzc2VydCghdGhpcy5wbGF5ZXJDb21taXQocGxheWVyS2V5KS5leGlzdHMsICdQbGF5ZXIgYWxyZWFkeSByZWdpc3RlcmVkIGluIHRoaXMgc2Vzc2lvbicpCiAgICBkdXAKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgIQogICAgYXNzZXJ0IC8vIFBsYXllciBhbHJlYWR5IHJlZ2lzdGVyZWQgaW4gdGhpcyBzZXNzaW9uCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMTMKICAgIC8vIHRoaXMucGxheWVyQ29tbWl0KHBsYXllcktleSkudmFsdWUgPSBjb21taXQKICAgIGR1cAogICAgYm94X2RlbAogICAgcG9wCiAgICBkaWcgMTIKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjY3CiAgICAvLyBzZXNzaW9uQmFsYW5jZXMgPSBCb3hNYXA8dWludDY0LCB1aW50NjQ+KHsga2V5UHJlZml4OiAnc2JhbCcgfSkKICAgIGJ5dGVjIDUgLy8gInNiYWwiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjExNAogICAgLy8gdGhpcy5zZXNzaW9uQmFsYW5jZXMoc2Vzc2lvbklEKS52YWx1ZSArPSBwYXltZW50LmFtb3VudAogICAgZHVwCiAgICBib3hfZ2V0CiAgICBhc3NlcnQgLy8gQm94IG11c3QgaGF2ZSB2YWx1ZQogICAgYnRvaQogICAgdW5jb3ZlciAyCiAgICArCiAgICBpdG9iCiAgICBib3hfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo5NgogICAgLy8gdGhpcy5zZXNzaW9uUGxheWVycyhzZXNzaW9uSUQpLnZhbHVlID0gY2xvbmUocGxheWVycykKICAgIGRpZyA0CiAgICBkaWcgNAogICAgYm94X3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6NjgKICAgIC8vIHB1YmxpYyBqb2luU2Vzc2lvbihzZXNzaW9uSUQ6IHVpbnQ2NCwgY29tbWl0OiBieXRlcywgcGF5bWVudDogZ3R4bi5QYXltZW50VHhuLCBtYnJQYXltZW50OiBndHhuLlBheW1lbnRUeG4pOiB2b2lkIHsKICAgIGludGNfMCAvLyAxCiAgICByZXR1cm4KCmpvaW5TZXNzaW9uX2Vsc2VfYm9keUA3OgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6ODgKICAgIC8vIH0gZWxzZSBpZiAocGxheWVycy5wMi5uYXRpdmUgPT09IHplcm9BZGRyZXNzLm5hdGl2ZSkgewogICAgZGlnIDMKICAgIGR1cAogICAgZXh0cmFjdCAzMiAzMgogICAgZGlnIDMKICAgID09CiAgICBhc3NlcnQgLy8gU2Vzc2lvbiBpcyBmdWxsIChNYXggMiBwbGF5ZXJzKQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6ODkKICAgIC8vIHBsYXllcnMucDIgPSBzZW5kZXJBZGRyZXNzCiAgICBkaWcgMwogICAgcmVwbGFjZTIgMzIKICAgIGJ1cnkgNAogICAgYiBqb2luU2Vzc2lvbl9hZnRlcl9pZl9lbHNlQDExCgpqb2luU2Vzc2lvbl9ib29sX2ZhbHNlQDQ6CiAgICBpbnRjXzEgLy8gMAogICAgYiBqb2luU2Vzc2lvbl9ib29sX21lcmdlQDUKCgovLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMucmV2ZWFsTW92ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CnJldmVhbE1vdmU6CiAgICBpbnRjXzEgLy8gMAogICAgZHVwbiA3CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cG4gMgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTA2CiAgICAvLyBwdWJsaWMgcmV2ZWFsTW92ZShzZXNzaW9uSUQ6IHVpbnQ2NCwgY2hvaWNlOiB1aW50NjQsIHNhbHQ6IGJ5dGVzKTogdm9pZCB7CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18zIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzMgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgY292ZXIgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBpbnRjXzEgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18yIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgZXh0cmFjdCAyIDAKICAgIGNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjEwNwogICAgLy8gYXNzZXJ0KGNob2ljZSA8IFVpbnQ2NCgzKSwgJ0ludmFsaWQgY2hvaWNlOiBtdXN0IGJlIDAsIDEsIG9yIDInKQogICAgcHVzaGludCAzIC8vIDMKICAgIDwKICAgIGFzc2VydCAvLyBJbnZhbGlkIGNob2ljZTogbXVzdCBiZSAwLCAxLCBvciAyCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMDkKICAgIC8vIGlmICh0aGlzLmdhbWVGaW5pc2hlZChzZXNzaW9uSUQpLnZhbHVlKSB7CiAgICBpdG9iCiAgICBkdXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjMwCiAgICAvLyBnYW1lRmluaXNoZWQgPSBCb3hNYXA8dWludDY0LCB1aW50NjQ+KHsga2V5UHJlZml4OiAnZ2ZuJyB9KQogICAgYnl0ZWMgNyAvLyAiZ2ZuIgogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjEwOQogICAgLy8gaWYgKHRoaXMuZ2FtZUZpbmlzaGVkKHNlc3Npb25JRCkudmFsdWUpIHsKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBCb3ggbXVzdCBoYXZlIHZhbHVlCiAgICBidG9pCiAgICBibnogcmV2ZWFsTW92ZV9hZnRlcl9pbmxpbmVkX3NtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjpSb2NrUGFwZXJTY2lzc29ycy5yZXZlYWxNb3ZlQDEwCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo2MgogICAgLy8gZ2FtZVNlc3Npb25zID0gQm94TWFwPHVpbnQ2NCwgR2FtZUNvbmZpZz4oeyBrZXlQcmVmaXg6ICdncycgfSkKICAgIGJ5dGVjIDQgLy8gImdzIgogICAgZGlnIDIKICAgIGR1cAogICAgY292ZXIgMgogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMjUKICAgIC8vIGFzc2VydCh0aGlzLmdhbWVTZXNzaW9ucyhzZXNzaW9uSUQpLmV4aXN0cywgJ1Nlc3Npb24gZG9lcyBub3QgZXhpc3QnKQogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBTZXNzaW9uIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMjcKICAgIC8vIGNvbnN0IGNvbmZpZyA9IGNsb25lKHRoaXMuZ2FtZVNlc3Npb25zKHNlc3Npb25JRCkudmFsdWUpCiAgICBib3hfZ2V0CiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjEyOAogICAgLy8gY29uc3QgY3VycmVudEJsb2NrID0gR2xvYmFsLnJvdW5kCiAgICBnbG9iYWwgUm91bmQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjEzMAogICAgLy8gYXNzZXJ0KGN1cnJlbnRCbG9jayA+IGNvbmZpZy5lbmRDb21taXRBdCwgJ0NvbW1pdCBwaGFzZSBpcyBzdGlsbCBhY3RpdmUnKQogICAgZGlnIDEKICAgIGludGNfMyAvLyA4CiAgICBleHRyYWN0X3VpbnQ2NAogICAgZGlnIDEKICAgIDwKICAgIGFzc2VydCAvLyBDb21taXQgcGhhc2UgaXMgc3RpbGwgYWN0aXZlCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMzEKICAgIC8vIGFzc2VydChjdXJyZW50QmxvY2sgPD0gY29uZmlnLmVuZFJldmVhbEF0LCAnUmV2ZWFsIHBoYXNlIGhhcyBlbmRlZCcpCiAgICBzd2FwCiAgICBwdXNoaW50IDE2IC8vIDE2CiAgICBleHRyYWN0X3VpbnQ2NAogICAgPD0KICAgIGFzc2VydCAvLyBSZXZlYWwgcGhhc2UgaGFzIGVuZGVkCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoyMDEKICAgIC8vIHJldHVybiBzaGEyNTYoaXRvYihzZXNzaW9uSUQpLmNvbmNhdChwbGF5ZXIuYnl0ZXMpKQogICAgZHVwCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMzMKICAgIC8vIGNvbnN0IHBsYXllckFkZHIgPSBuZXcgQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MjAxCiAgICAvLyByZXR1cm4gc2hhMjU2KGl0b2Ioc2Vzc2lvbklEKS5jb25jYXQocGxheWVyLmJ5dGVzKSkKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo1MAogICAgLy8gcGxheWVyQ29tbWl0ID0gQm94TWFwPGJ5dGVzLCBieXRlcz4oeyBrZXlQcmVmaXg6ICdwY29tJyB9KQogICAgYnl0ZWMgOSAvLyAicGNvbSIKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjEzNgogICAgLy8gYXNzZXJ0KHRoaXMucGxheWVyQ29tbWl0KHBsYXllcktleSkuZXhpc3RzLCAnTm8gY29tbWl0IGZvdW5kIGZvciB0aGlzIHBsYXllciBvciBhbHJlYWR5IHJldmVhbGVkJykKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gY29tbWl0IGZvdW5kIGZvciB0aGlzIHBsYXllciBvciBhbHJlYWR5IHJldmVhbGVkCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMzgKICAgIC8vIGNvbnN0IHN0b3JlZENvbW1pdCA9IHRoaXMucGxheWVyQ29tbWl0KHBsYXllcktleSkudmFsdWUKICAgIGR1cAogICAgYm94X2dldAogICAgcG9wCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxMzkKICAgIC8vIGNvbnN0IGNvbXB1dGVkQ29tbWl0ID0gc2hhMjU2KGl0b2IoY2hvaWNlKS5jb25jYXQoc2FsdCkpCiAgICBkaWcgNwogICAgaXRvYgogICAgZHVwCiAgICBkaWcgOAogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjE0MQogICAgLy8gYXNzZXJ0KGNvbXB1dGVkQ29tbWl0ID09PSBzdG9yZWRDb21taXQsICdJbnZhbGlkIHJldmVhbDogaGFzaCBtaXNtYXRjaCcpCiAgICB1bmNvdmVyIDIKICAgID09CiAgICBhc3NlcnQgLy8gSW52YWxpZCByZXZlYWw6IGhhc2ggbWlzbWF0Y2gKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjU3CiAgICAvLyBwbGF5ZXJDaG9pY2UgPSBCb3hNYXA8Ynl0ZXMsIHVpbnQ2ND4oeyBrZXlQcmVmaXg6ICdwY2hvJyB9KQogICAgYnl0ZWNfMiAvLyAicGNobyIKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxNDMKICAgIC8vIHRoaXMucGxheWVyQ2hvaWNlKHBsYXllcktleSkudmFsdWUgPSBjaG9pY2UKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjE0NAogICAgLy8gdGhpcy5wbGF5ZXJDb21taXQocGxheWVyS2V5KS5kZWxldGUoKQogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoyMwogICAgLy8gc2Vzc2lvblBsYXllcnMgPSBCb3hNYXA8dWludDY0LCBTZXNzaW9uUGxheWVycz4oeyBrZXlQcmVmaXg6ICdzcGwnIH0pCiAgICBieXRlYyA2IC8vICJzcGwiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGR1cAogICAgYnVyeSAxNQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTE2CiAgICAvLyBjb25zdCBwbGF5ZXJzID0gY2xvbmUodGhpcy5zZXNzaW9uUGxheWVycyhzZXNzaW9uSUQpLnZhbHVlKQogICAgYm94X2dldAogICAgc3dhcAogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidXJ5IDEyCiAgICBhc3NlcnQgLy8gQm94IG11c3QgaGF2ZSB2YWx1ZQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTE3CiAgICAvLyBjb25zdCB6ZXJvQWRkcmVzcyA9IG5ldyBBZGRyZXNzKEdsb2JhbC56ZXJvQWRkcmVzcykKICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidXJ5IDExCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMjAKICAgIC8vIGlmIChwbGF5ZXJzLnAxLm5hdGl2ZSAhPT0gemVyb0FkZHJlc3MubmF0aXZlICYmIHBsYXllcnMucDIubmF0aXZlICE9PSB6ZXJvQWRkcmVzcy5uYXRpdmUpIHsKICAgIGV4dHJhY3QgMCAzMgogICAgZHVwCiAgICBidXJ5IDE0CiAgICAhPQogICAgYnogcmV2ZWFsTW92ZV9hZnRlcl9pbmxpbmVkX3NtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjpSb2NrUGFwZXJTY2lzc29ycy5yZXZlYWxNb3ZlQDEwCiAgICBkaWcgOQogICAgZXh0cmFjdCAzMiAzMgogICAgZHVwCiAgICBidXJ5IDEyCiAgICBkaWcgOQogICAgIT0KICAgIGJ6IHJldmVhbE1vdmVfYWZ0ZXJfaW5saW5lZF9zbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMucmV2ZWFsTW92ZUAxMAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MjAxCiAgICAvLyByZXR1cm4gc2hhMjU2KGl0b2Ioc2Vzc2lvbklEKS5jb25jYXQocGxheWVyLmJ5dGVzKSkKICAgIGRpZyAxCiAgICBkdXAKICAgIGRpZyAxMwogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIHN3YXAKICAgIGRpZyAxMgogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIGJ1cnkgMTQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjU3CiAgICAvLyBwbGF5ZXJDaG9pY2UgPSBCb3hNYXA8Ynl0ZXMsIHVpbnQ2ND4oeyBrZXlQcmVmaXg6ICdwY2hvJyB9KQogICAgYnl0ZWNfMiAvLyAicGNobyIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTI1CiAgICAvLyBpZiAodGhpcy5wbGF5ZXJDaG9pY2Uoa2V5MSkuZXhpc3RzICYmIHRoaXMucGxheWVyQ2hvaWNlKGtleTIpLmV4aXN0cykgewogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBieiByZXZlYWxNb3ZlX2FmdGVyX2lubGluZWRfc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6OlJvY2tQYXBlclNjaXNzb3JzLnJldmVhbE1vdmVAMTAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjU3CiAgICAvLyBwbGF5ZXJDaG9pY2UgPSBCb3hNYXA8Ynl0ZXMsIHVpbnQ2ND4oeyBrZXlQcmVmaXg6ICdwY2hvJyB9KQogICAgYnl0ZWNfMiAvLyAicGNobyIKICAgIGRpZyAxMwogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMjUKICAgIC8vIGlmICh0aGlzLnBsYXllckNob2ljZShrZXkxKS5leGlzdHMgJiYgdGhpcy5wbGF5ZXJDaG9pY2Uoa2V5MikuZXhpc3RzKSB7CiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGJ6IHJldmVhbE1vdmVfYWZ0ZXJfaW5saW5lZF9zbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMucmV2ZWFsTW92ZUAxMAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTM2CiAgICAvLyBhc3NlcnQoIXRoaXMuZ2FtZUZpbmlzaGVkKHNlc3Npb25JRCkudmFsdWUsICdQcml6ZSBhbHJlYWR5IGRpc3RyaWJ1dGVkJykKICAgIGR1cAogICAgYm94X2dldAogICAgYXNzZXJ0IC8vIEJveCBtdXN0IGhhdmUgdmFsdWUKICAgIGJ0b2kKICAgICEKICAgIGFzc2VydCAvLyBQcml6ZSBhbHJlYWR5IGRpc3RyaWJ1dGVkCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMzgKICAgIC8vIGNvbnN0IHBsYXllcnMgPSBjbG9uZSh0aGlzLnNlc3Npb25QbGF5ZXJzKHNlc3Npb25JRCkudmFsdWUpCiAgICBkaWcgMTMKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBCb3ggbXVzdCBoYXZlIHZhbHVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMzkKICAgIC8vIGNvbnN0IGNob2ljZTE6IHVpbnQ2NCA9IHRoaXMuZ2V0UGxheWVyQ2hvaWNlKHNlc3Npb25JRCwgcGxheWVycy5wMSkKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyCiAgICBkdXAKICAgIGJ1cnkgMTgKICAgIGRpZyA2CiAgICBkdXAKICAgIGNvdmVyIDMKICAgIHN3YXAKICAgIGNhbGxzdWIgZ2V0UGxheWVyQ2hvaWNlCiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGJ1cnkgMTAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE0MAogICAgLy8gY29uc3QgY2hvaWNlMjogdWludDY0ID0gdGhpcy5nZXRQbGF5ZXJDaG9pY2Uoc2Vzc2lvbklELCBwbGF5ZXJzLnAyKQogICAgZXh0cmFjdCAzMiAzMgogICAgZHVwCiAgICBidXJ5IDE4CiAgICBjYWxsc3ViIGdldFBsYXllckNob2ljZQogICAgZHVwCiAgICBidXJ5IDgKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjY3CiAgICAvLyBzZXNzaW9uQmFsYW5jZXMgPSBCb3hNYXA8dWludDY0LCB1aW50NjQ+KHsga2V5UHJlZml4OiAnc2JhbCcgfSkKICAgIGJ5dGVjIDUgLy8gInNiYWwiCiAgICBkaWcgNAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxODUKICAgIC8vIGFzc2VydCh0aGlzLnNlc3Npb25CYWxhbmNlcyhzZXNzaW9uSUQpLmV4aXN0cywgJ1Nlc3Npb24gZG9lcyBub3QgZXhpc3QnKQogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBTZXNzaW9uIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxODYKICAgIC8vIHJldHVybiB0aGlzLnNlc3Npb25CYWxhbmNlcyhzZXNzaW9uSUQpLnZhbHVlCiAgICBib3hfZ2V0CiAgICBwb3AKICAgIGJ0b2kKICAgIGJ1cnkgMTAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE0OAogICAgLy8gaWYgKGNob2ljZTEgPT09IGNob2ljZTIpIHsKICAgID09CiAgICBieiByZXZlYWxNb3ZlX2Vsc2VfYm9keUAxMwogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTQ5CiAgICAvLyBjb25zdCBoYWxmOiB1aW50NjQgPSBiYWxhbmNlIC8gMgogICAgZGlnIDcKICAgIGludGNfMiAvLyAyCiAgICAvCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxNTAKICAgIC8vIHRoaXMuZGlzdHJpYnV0ZVByaXplKHBsYXllcnMucDEsIGhhbGYpCiAgICBkaWcgMTYKICAgIGRpZyAxCiAgICBjYWxsc3ViIGRpc3RyaWJ1dGVQcml6ZQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTUxCiAgICAvLyB0aGlzLmRpc3RyaWJ1dGVQcml6ZShwbGF5ZXJzLnAyLCBoYWxmKQogICAgZGlnIDE1CiAgICBzd2FwCiAgICBjYWxsc3ViIGRpc3RyaWJ1dGVQcml6ZQoKcmV2ZWFsTW92ZV9hZnRlcl9pZl9lbHNlQDIxOgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTY3CiAgICAvLyB0aGlzLmdhbWVGaW5pc2hlZChzZXNzaW9uSUQpLnZhbHVlID0gMQogICAgaW50Y18wIC8vIDEKICAgIGl0b2IKICAgIGRpZyAxCiAgICBzd2FwCiAgICBib3hfcHV0CgpyZXZlYWxNb3ZlX2FmdGVyX2lubGluZWRfc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6OlJvY2tQYXBlclNjaXNzb3JzLnJldmVhbE1vdmVAMTA6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxMDYKICAgIC8vIHB1YmxpYyByZXZlYWxNb3ZlKHNlc3Npb25JRDogdWludDY0LCBjaG9pY2U6IHVpbnQ2NCwgc2FsdDogYnl0ZXMpOiB2b2lkIHsKICAgIGludGNfMCAvLyAxCiAgICByZXR1cm4KCnJldmVhbE1vdmVfZWxzZV9ib2R5QDEzOgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTU1CiAgICAvLyAoY2hvaWNlMSA9PT0gUk9DSyAmJiBjaG9pY2UyID09PSBTQ0lTU09SUykgfHwKICAgIGRpZyA2CiAgICBibnogcmV2ZWFsTW92ZV9vcl9jb250ZEAxNQogICAgZGlnIDUKICAgIGludGNfMiAvLyAyCiAgICA9PQogICAgYm56IHJldmVhbE1vdmVfaWZfYm9keUAxOQoKcmV2ZWFsTW92ZV9vcl9jb250ZEAxNToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE1NgogICAgLy8gKGNob2ljZTEgPT09IFBBUEVSICYmIGNob2ljZTIgPT09IFJPQ0spIHx8CiAgICBkaWcgNgogICAgaW50Y18wIC8vIDEKICAgID09CiAgICBieiByZXZlYWxNb3ZlX29yX2NvbnRkQDE3CiAgICBkaWcgNQogICAgYnogcmV2ZWFsTW92ZV9pZl9ib2R5QDE5CgpyZXZlYWxNb3ZlX29yX2NvbnRkQDE3OgogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTU3CiAgICAvLyAoY2hvaWNlMSA9PT0gU0NJU1NPUlMgJiYgY2hvaWNlMiA9PT0gUEFQRVIpCiAgICBkaWcgNgogICAgaW50Y18yIC8vIDIKICAgID09CiAgICBieiByZXZlYWxNb3ZlX2Vsc2VfYm9keUAyMAogICAgZGlnIDUKICAgIGludGNfMCAvLyAxCiAgICA9PQogICAgYnogcmV2ZWFsTW92ZV9lbHNlX2JvZHlAMjAKCnJldmVhbE1vdmVfaWZfYm9keUAxOToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE1OQogICAgLy8gdGhpcy5kaXN0cmlidXRlUHJpemUocGxheWVycy5wMSwgYmFsYW5jZSkKICAgIGRpZyAxNQogICAgZGlnIDgKICAgIGNhbGxzdWIgZGlzdHJpYnV0ZVByaXplCiAgICBiIHJldmVhbE1vdmVfYWZ0ZXJfaWZfZWxzZUAyMQoKcmV2ZWFsTW92ZV9lbHNlX2JvZHlAMjA6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxNjMKICAgIC8vIHRoaXMuZGlzdHJpYnV0ZVByaXplKHBsYXllcnMucDIsIGJhbGFuY2UpCiAgICBkaWcgMTQKICAgIGRpZyA4CiAgICBjYWxsc3ViIGRpc3RyaWJ1dGVQcml6ZQogICAgYiByZXZlYWxNb3ZlX2FmdGVyX2lmX2Vsc2VAMjEKCgovLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlJbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRSZXF1aXJlZE1CUjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE4NwogICAgLy8gcHVibGljIGdldFJlcXVpcmVkTUJSKGNvbW1hbmQ6ICduZXdHYW1lJyB8ICdqb2luJyk6IHVpbnQ2NCB7CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGludGNfMSAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzIgLy8gMgogICAgKwogICAgZGlnIDEKICAgIGxlbgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5keW5hbWljX2FycmF5PGFyYzQudWludDg+CiAgICBleHRyYWN0IDIgMAogICAgY2FsbHN1YiBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlIKICAgIGl0b2IKICAgIGJ5dGVjIDggLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMCAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZGlzdHJpYnV0ZVByaXplKHdpbm5lcjogYnl0ZXMsIGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpkaXN0cmlidXRlUHJpemU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxNzMKICAgIC8vIHByaXZhdGUgZGlzdHJpYnV0ZVByaXplKHdpbm5lcjogQWRkcmVzcywgYW1vdW50OiB1aW50NjQpOiB2b2lkIHsKICAgIHByb3RvIDIgMAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTc0LTE4MAogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgcmVjZWl2ZXI6IHdpbm5lci5uYXRpdmUsCiAgICAvLyAgICAgYW1vdW50LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBmcmFtZV9kaWcgLTIKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE3NC0xNzkKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIHJlY2VpdmVyOiB3aW5uZXIubmF0aXZlLAogICAgLy8gICAgIGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzAgLy8gMQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTc4CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzEgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE3NC0xODAKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIHJlY2VpdmVyOiB3aW5uZXIubmF0aXZlLAogICAgLy8gICAgIGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIHJldHN1YgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjpSb2NrUGFwZXJTY2lzc29ycy5nZXRSZXF1aXJlZE1CUihjb21tYW5kOiBieXRlcykgLT4gdWludDY0OgpzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxODcKICAgIC8vIHB1YmxpYyBnZXRSZXF1aXJlZE1CUihjb21tYW5kOiAnbmV3R2FtZScgfCAnam9pbicpOiB1aW50NjQgewogICAgcHJvdG8gMSAxCiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxODgKICAgIC8vIGlmIChjb21tYW5kID09PSAnbmV3R2FtZScpIHsKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZWNfMCAvLyAibmV3R2FtZSIKICAgID09CiAgICBieiBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlJfZWxzZV9ib2R5QDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9Sb2NrUGFwZXJTY2lzc29ycy9jb250cmFjdC5hbGdvLnRzOjE5NAogICAgLy8gcmV0dXJuIHBsYXllcnNNQlIgKyBzdGF0ZU1CUiArIHN1cGVyLmdldFJlcXVpcmVkTUJSKCduZXdHYW1lJykKICAgIGJ5dGVjXzAgLy8gIm5ld0dhbWUiCiAgICBjYWxsc3ViIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjpHYW1lQ29udHJhY3QuZ2V0UmVxdWlyZWRNQlIKICAgIGludGMgNCAvLyA0MjYwMAogICAgKwogICAgcmV0c3ViCgpzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czo6Um9ja1BhcGVyU2Npc3NvcnMuZ2V0UmVxdWlyZWRNQlJfZWxzZV9ib2R5QDI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvUm9ja1BhcGVyU2Npc3NvcnMvY29udHJhY3QuYWxnby50czoxOTUKICAgIC8vIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJ2pvaW4nKSB7CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGVjXzEgLy8gImpvaW4iCiAgICA9PQogICAgYXNzZXJ0IC8vIENvbW1hbmQgbm90IHN1cHBvcnRlZAogICAgLy8gc21hcnRfY29udHJhY3RzL1JvY2tQYXBlclNjaXNzb3JzL2NvbnRyYWN0LmFsZ28udHM6MTk2CiAgICAvLyByZXR1cm4gc3VwZXIuZ2V0UmVxdWlyZWRNQlIoJ2pvaW4nKQogICAgYnl0ZWNfMSAvLyAiam9pbiIKICAgIGNhbGxzdWIgc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6OkdhbWVDb250cmFjdC5nZXRSZXF1aXJlZE1CUgogICAgcmV0c3ViCgoKLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6OkdhbWVDb250cmFjdC5nZXRSZXF1aXJlZE1CUihjb21tYW5kOiBieXRlcykgLT4gdWludDY0OgpzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo6R2FtZUNvbnRyYWN0LmdldFJlcXVpcmVkTUJSOgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTU4CiAgICAvLyBwcm90ZWN0ZWQgZ2V0UmVxdWlyZWRNQlIoY29tbWFuZDogJ25ld0dhbWUnIHwgJ2pvaW4nKTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTU5CiAgICAvLyBpZiAoY29tbWFuZCA9PT0gJ25ld0dhbWUnKSB7CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGVjXzAgLy8gIm5ld0dhbWUiCiAgICA9PQogICAgYnogc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6OkdhbWVDb250cmFjdC5nZXRSZXF1aXJlZE1CUl9lbHNlX2JvZHlAMgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTY0CiAgICAvLyByZXR1cm4gY29uZmlnTUJSICsgYmFsYW5jZU1CUgogICAgaW50YyA0IC8vIDQyNjAwCiAgICByZXRzdWIKCnNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjpHYW1lQ29udHJhY3QuZ2V0UmVxdWlyZWRNQlJfZWxzZV9ib2R5QDI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoxNjUKICAgIC8vIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJ2pvaW4nKSB7CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGVjXzEgLy8gImpvaW4iCiAgICA9PQogICAgYXNzZXJ0IC8vIENvbW1hbmQgbm90IHN1cHBvcnRlZAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTUyCiAgICAvLyByZXR1cm4gMjUwMCArIDQwMCAqIChrZXlTaXplICsgdmFsdWVTaXplKQogICAgcHVzaGludCAyOTcwMCAvLyAyOTcwMAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTY3CiAgICAvLyByZXR1cm4gdGhpcy5nZXRCb3hNQlIoMzYsIDMyKQogICAgcmV0c3ViCgoKLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6OkdhbWVDb250cmFjdC5nZXRQbGF5ZXJDaG9pY2Uoc2Vzc2lvbklEOiB1aW50NjQsIHBsYXllcjogYnl0ZXMpIC0+IHVpbnQ2NDoKZ2V0UGxheWVyQ2hvaWNlOgogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTc1CiAgICAvLyBwcm90ZWN0ZWQgZ2V0UGxheWVyQ2hvaWNlKHNlc3Npb25JRDogdWludDY0LCBwbGF5ZXI6IEFkZHJlc3MpOiB1aW50NjQgewogICAgcHJvdG8gMiAxCiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czoyMDEKICAgIC8vIHJldHVybiBzaGEyNTYoaXRvYihzZXNzaW9uSUQpLmNvbmNhdChwbGF5ZXIuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzbWFydF9jb250cmFjdHMvYWJzdHJhY3RfY29udHJhY3QvY29udHJhY3QuYWxnby50czo1NwogICAgLy8gcGxheWVyQ2hvaWNlID0gQm94TWFwPGJ5dGVzLCB1aW50NjQ+KHsga2V5UHJlZml4OiAncGNobycgfSkKICAgIGJ5dGVjXzIgLy8gInBjaG8iCiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9hYnN0cmFjdF9jb250cmFjdC9jb250cmFjdC5hbGdvLnRzOjE3NwogICAgLy8gYXNzZXJ0KHRoaXMucGxheWVyQ2hvaWNlKGtleSkuZXhpc3RzLCAnUGxheWVyIGNob2ljZSBub3QgZm91bmQnKQogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBQbGF5ZXIgY2hvaWNlIG5vdCBmb3VuZAogICAgLy8gc21hcnRfY29udHJhY3RzL2Fic3RyYWN0X2NvbnRyYWN0L2NvbnRyYWN0LmFsZ28udHM6MTc4CiAgICAvLyByZXR1cm4gdGhpcy5wbGF5ZXJDaG9pY2Uoa2V5KS52YWx1ZQogICAgYm94X2dldAogICAgcG9wCiAgICBidG9pCiAgICByZXRzdWIK",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 0,
            "num_uints": 1
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {
                "sessionIDCounter": {
                    "type": "uint64",
                    "key": "sessionIDCounter",
                    "descr": "Global counter for generating unique session IDs."
                }
            },
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "RockPaperScissors",
        "desc": "Concrete implementation of Rock-Paper-Scissors.\nExtends the abstract GameContract to handle the specific 2-player logic and win conditions.",
        "methods": [
            {
                "name": "createSession",
                "args": [
                    {
                        "type": "(uint64,uint64,uint64,uint64)",
                        "name": "config",
                        "desc": "- Game configuration (timelines and fee)."
                    },
                    {
                        "type": "pay",
                        "name": "mbrPayment",
                        "desc": "- Payment transaction to cover MBR."
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Initializes a new RPS session.\nCalculates the extended MBR required for storing player slots and game status."
            },
            {
                "name": "joinSession",
                "args": [
                    {
                        "type": "uint64",
                        "name": "sessionID",
                        "desc": "- The ID of the session i want to partecipate"
                    },
                    {
                        "type": "byte[]",
                        "name": "commit",
                        "desc": "- The has of myChoice + salt"
                    },
                    {
                        "type": "pay",
                        "name": "payment",
                        "desc": "- The payment needed to partecipate"
                    },
                    {
                        "type": "pay",
                        "name": "mbrPayment",
                        "desc": "- The payment for the needed space"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Joins the session, assigning the player to an empty slot (P1 or P2).\nEnforces a maximum of 2 players per session."
            },
            {
                "name": "revealMove",
                "args": [
                    {
                        "type": "uint64",
                        "name": "sessionID",
                        "desc": "- The ID of the session"
                    },
                    {
                        "type": "uint64",
                        "name": "choice",
                        "desc": "- 0 (Rock), 1 (Paper), 2 (Scissors)."
                    },
                    {
                        "type": "byte[]",
                        "name": "salt",
                        "desc": "- The salt used for the secret commit"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Reveals a move. If both players have revealed, immediately triggers winner determination."
            },
            {
                "name": "getRequiredMBR",
                "args": [
                    {
                        "type": "string",
                        "name": "command"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Calculates the MBR requirements for this specific game type.\nAdds the cost of 'sessionPlayers' and 'gameFinished' boxes to the parent's requirements."
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "no_op": "CREATE"
    }
}